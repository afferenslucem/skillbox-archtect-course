- **Status**: принято
- **Deciders**: А. Шакиров
- **Date**: 2025-03-01

**Technical Story**: для увеличения быстродействия работы пользователя требуется сделать географическое масштабирование системы. Чтобы убрать узкое горлышко в виде базы данных, следует масштабировать и базы данных.

Требуется выбрать способ репликации, чтобы вне зависимости от выбора инстанса, данные были в актуальном состоянии.

### Decision Drivers

- Скорость репликации
    
- Наименьшее кол-во коллизий
    
- Повышение отказоустойчивости, в случае, если откажет один из инстансов

### Decision Outcome

Выбрана репликация с несколькими лидерами. В выбранных географических областях будут созданы кластеры БД, в каждом из которых будет выбран лидер. Пользователь будет привязываться к определённому лидеру географически, что позволит избегать коллизий и конфликтов при синхронизации изменений.

### Positive Consequences

- Повышается изоляция сбоев  
    Так как отказ одного кластера или лидера не скажется на всем сервисе – проблемы будут локализованы в одном регионе
    
- Повышается скорость сохранения данных, так как для запили используется только лидер, а за чтение отвечают последователи
    

### Negative consequences

- Уменьшается согласованность внутри системы, но данные согласованы внутри регионов. По-хорошему, потребуется отслеживание отстарания данных и сдерживание их в разумных пределах.